# 230109_TIL

## SSH

### SSH란?

> **S**ecure **SH**ell(시큐어 쉘)

원격 호스트에 접속하기 위해 사용되는 보안 프로토콜

네트워크 상의 다른 컴퓨터에 로그인하거나 원격 시스템에서 명령을 실행하고 다른 시스템으로 파일을 복사할 수 있도록 해주는 프로토콜을 의미

**※ Shell(쉘)**

명령어와 프로그램을 사용할 때 쓰는 인터페이스

커널과 사용자 간의 다리 역할을 하는 것으로, 사용자로부터 명령을 받아 그것을 해석하고 실행하는 역할

<br>

기존의 텔넷(Telnet) 방식의 원격 접속은 암호화를 제공하지 않기 때문에 보안상 취약하다는 단점이 존재했음. 누구나 쉽게 원격 접속 과정에서 옮겨지는 비밀번호나 파일 내용 등의 데이터를 탈취할 수 있었음.

이를 극복하고자 암호화된 기술인 SSH가 등장하였고, 현재는 원격 접속 보안을 위한 필수 요소로 자리잡음

클라우드 서비스에서 제공하는 서버는 기본적으로 원격 접속을 해서 사용하는데, 서버 생성 시 필수적으로 SSH 보안 과정을 거치게 됨

### 대표적인 사용 예시

- 데이터 전송
  - 깃 허브와 같은 원격 저장소에 푸시할 때 SSH를 활용해서 파일을 전송 가능
- 원격 제어(원격 접속)
  - AWS와 같은 클라우드 서비스는 인스턴스 서버에 접속하여 해당 머신에 명령을 내리기 위해서 SSH을 통한 접속을 해야 함

<br>

###  작동 방식

SSH의 핵심 키워드는 `KEY`이다. 사용자(클라이언트)와 서버(호스트)는 각각의 키를 보유하고 있으며, 이 키를 이용해서 연결 상대를 인증하고 안전하게 데이터를 주고 받음

가장 대표적인 키 생성 방식에는 비대칭키와 대칭키가 있음

#### 비대칭키

서버 또는 사용자가 Key Pair(키 쌍, 키 페어)을 생성함. 키 페어는 `공개 키(Public Key)`와 `개인 키(Private Key)`로 이루어져 있음.

보통 공개 키는 `.pub`, 개인 키는 `.pem`의 파일 형식을 가지고 있음

사용자가 키 페어를 생성하면, 공개 키를 서버에 전송하고, 서버는 공개 키를 전송받아서 이 공개 키를 사용해서 랜덤한 값을 만듦. 사용자는 개인 키를 가지고 이 랜덤한 값을 풀게 됨.

이 때, 해당 값은 오직 키 페어 생성 시 함께 생성된 개인 키와 공개 키만 서로 해석이 가능하기 때문에 다른 개인 키로는 절대 해석이 불가능함.

개인 키를 통해 해석한 값을 다시 서버에 전송하고, 서버는 자신이 공개 키로 암호화했던 원래 값과 비교하여 일치 여부를 판단한 뒤에 일치한다면 올바른 개인 키를 가진 사용자이기 때문에 접속을 허용하고, 그렇지 않을 경우 해당 사용자에 대한 접속을 차단함

- Public Key
  - 공개되어도 상관없는 키
  - 공개 키를 사용해서 데이터를 전송하기 전에 암호화를 진행함
  - 공개 키로는 암호화는 가능하지만 복호화는 불가능함
- Private Key
  - 절대 외부에 노출되어서는 안 되는 키
  - 암호화된 데이터를 복호화할 수 있는 키

<br>

#### 대칭키

비대칭키 방식과 달리 한 개의 키만 사용함

사용자 또는 서버는 하나의 대칭키를 만들고 서로 공유하며, 공유된 대칭키를 이용해 정보를 암호화하면, 받은 쪽에서 동일한 대칭키로 암호를 풀어 정보를 습득한 뒤, 해당 대칭키는 폐기하고 새로운 대칭키를 생성하여 사용함